# Funkcionális specifikáció

## 1. A rendszer céljai és nem céljai

A fejlesztés célja egy olyan receptmegosztó webalkalmazás létrehozása, amely lehetővé teszi a felhasználók számára receptek feltöltését, megtekintését és kezelését. A rendszer célja egy közösségi platform alapjainak megteremtése, ahol a felhasználók recepteket böngészhetnek, a regisztrált tagok pedig saját tartalmat hozhatnak létre.

A rendszer architektúrája modern technológiákra épül: a backend egy Java Spring Boot alkalmazás REST API végpontokkal, míg a frontend egy Blazor keretrendszerben készült kliens MudBlazor komponensekkel. Az adatokat relációs adatbázis tárolja (felhasználók, receptek, kategóriák, alapanyagok).

A rendszer kezelni képes a felhasználói regisztrációt és bejelentkezést a Spring Security és sütialapú (JSESSIONID) munkamenet segítségével. A receptekhez nevet, leírást, kategóriát, képet, elkészítési lépéseket és – alapanyagokra épülő – hozzávalólistát lehet társítani. Kiemelt cél a tápértékadatok kezelése: az alkalmazásban az egyes alapanyagokhoz rögzített tápértékadatok (kalória, fehérje, szénhidrát, zsír) tartoznak, bár külső API integráció a jelenlegi verzióban nem valósul meg.

A rendszer funkciói eltérőek a látogatók és a regisztrált felhasználók számára. A látogatók böngészhetnek és kereshetnek, míg a tartalomkezeléshez (CRUD műveletek) bejelentkezés szükséges.

A fejlesztés jelenlegi ütemében (V1.0) nem cél a rendszer teljes körű közösségi interakciókkal való felruházása. Az eredeti tervekkel ellentétben a jelenlegi verzióban **nem megvalósított** funkciók:
- Kommentelés a receptekhez.
- Csillagos értékelés (1-5).
- Kedvencek (bookmark/like) funkció.
- Profilkép fizikai feltöltése (csak referencia kezelése).
- Webshop, alapanyag-rendelés vagy kurzusok szervezése.

Nem cél továbbá több, egymástól független közösség kiszolgálása; a projekt egyetlen, egységes receptmegosztó oldalt valósít meg.

## 2. Használati esetek

A rendszer használói a következők:

- **látogató** (nem regisztrált / nem bejelentkezett felhasználó)
- **regisztrált felhasználó** (bejelentkezett)

A rendszernek a következő funkciókat kell ellátnia:

- látogatók tudnak recepteket böngészni (lista megtekintése)
- látogatók tudnak egy adott recept részleteit megtekinteni (hozzávalók, lépések, tápérték)
- látogatók tudnak szűrni kategóriák szerint
- látogatók tudnak keresni receptnév alapján (kliensoldali szűrés)
- látogatók a regisztrációs felületre navigálhatnak
- regisztrált felhasználók tudnak regisztrálni és bejelentkezni (Spring Security)
- regisztrált felhasználók tudnak új receptet létrehozni (név, kategória, idők, leírás, hozzávalók, kép)
- regisztrált felhasználók tudják a saját receptjeiket szerkeszteni
- regisztrált felhasználók tudják a saját receptjeiket törölni
- regisztrált felhasználók meg tudják nyitni a Profil oldalt a saját receptjeik kezeléséhez

### Előfeltételek:

- A regisztrált felhasználóknak a rendszer használatához azonosítás szükséges. A bejelentkezés a backend `/login` végpontján történik, a munkamenetet JSESSIONID süti biztosítja.
- A receptfeltöltéshez és a saját receptek módosításához bejelentkezés szükséges.

*[USE CASE DIAGRAM HELYE]*

## 3. Megfeleltetés, hogyan fedik le a használati esetek a követelményeket

- **K01 (Felhasználói fiókok kezelése)**: A rendszer biztosítja a regisztrációt a `/user/register` végponton keresztül, valamint a be- és kijelentkezést a Spring Security form login segítségével. Az aktuális felhasználó adatai (pl. profilkép referencia) a `/user` végponton érhetők el.
- **K02 (Receptek adminisztrációja)**: A regisztrált felhasználók jogosultak új recepteket létrehozni, szerkeszteni és törölni (`/recipe` végpontok). A rendszer kezeli a receptekhez tartozó kategóriákat és a hozzávalókat (alapanyag + mennyiség) is.
- **K03 (Receptek szűrése és keresése)**: A látogatók kategória szerint szűrhetik a recepteket (backend: `/recipe/bycategory`), valamint név alapján kereshetnek a betöltött listában (kliensoldali `SearchState` alapú szűrés).
- **K04 (Online elérhető nyilvános recept katalógus)**: A weboldal főoldala és a recept részletező oldal autentikáció nélkül is elérhető, így a tartalom széles körben hozzáférhető a látogatók számára.
- **K05 (Tápérték adatok kezelése)**: Az alkalmazás az alapanyagok (`Material`) szintjén tárolja a tápértékadatokat (kalória, fehérje, zsír, szénhidrát, mértékegység), amelyek a receptek hozzávalóinak kiválasztásakor és listázásakor jelennek meg.
- **K06 (Egyszerűen használható kezelőfelület)**: A felhasználói felület Blazor technológiával és MudBlazor komponensekkel (pl. MudDialog, MudCard) valósul meg, biztosítva a reszponzív, modern megjelenést és a dinamikus működést.
- **K07 (Platformfüggetlen, robosztus működés)**: A Java Spring Boot backend és a Blazor (ASP.NET Core) frontend használata biztosítja a szabványos, böngésző- és operációs rendszer-független működést.
- **K08 (Bővíthetőség)**: A moduláris architektúra (külön entitások, DTO-k, service réteg) és az OpenAPI dokumentáció lehetővé teszi a rendszer későbbi bővítését (pl. kommentek, kedvencek funkcióval).

## 4. Képernyőtervek

A képernyőtervek a megvalósult Blazor komponenseket tükrözik. A korábbi statikus HTML tervek helyett a felület MudBlazor elemekből épül fel, biztosítva a dinamikus adatkezelést és interaktivitást.

### Főbb oldalak:

- **Home.razor (Kezdőlap)**: A belépési pont minden felhasználó számára. Tartalmazza a receptkártyák listáját, a név szerinti keresőmezőt és a kategóriaszűrő komponenst. Bejelentkezett felhasználók számára itt jelenik meg az "Add New Recipe" gomb.
- **Recipe.razor (Recept részletek)**: Egy adott recept részletes nézete (`/Recipe/{RecipeId}`): megjeleníti a recept nevét, képét, az elkészítési időket, a hozzávalók táblázatos listáját és a számozott elkészítési lépéseket.
- **Account.razor**: A bejelentkezés kezelésére szolgáló oldal. Ellenőrzi az autentikációt; amennyiben a felhasználó nincs bejelentkezve, átirányítja a backend Spring Security `/login` felületére.
- **Profil.razor**: A bejelentkezett felhasználó személyes oldala. Itt található a "My recipes" fül, amely listázza a felhasználó saját receptjeit, lehetőséget adva azok megtekintésére ("Details"), szerkesztésére ("Edit") vagy törlésére ("Delete").

## 5. Forgatókönyvek

A **Kezdőlap (Látogatói forgatókönyv)** során a látogató megnyitja az alkalmazást (`/`), ahol a rendszer betölti az összes receptet a backendről. A receptek kártyákon jelennek meg (név, idő, kép). A látogató a keresőmező segítségével szűrheti a listát név szerint, vagy kategóriát választhat, amely új lekérdezést indít a szerver felé.

A **Recept részleteinek megtekintése** során a felhasználó egy receptkártyára kattint, mire a rendszer a `/Recipe/{id}` oldalra navigál. Itt betöltődnek a recept részletes adatai: leírás, hozzávalók listája és az elkészítés lépései.

A **Bejelentkezés folyamata**: A felhasználó az "Account" menüpontra kattint. A rendszer ellenőrzi a JSESSIONID sütit. Ha hiányzik, a felhasználót a Spring Security bejelentkezési űrlapjára irányítja. Sikeres belépés után a frontend autentikáltnak tekinti a felhasználót.

### Regisztrált felhasználóként végezhető műveletek:

- **Új recept létrehozása**: A felhasználó az "Add New Recipe" gombra kattint. A megjelenő űrlapon (MudDialog) kiválasztja a kategóriát és az alapanyagokat a rendszer által kínált listából, megadja a mennyiségeket és leírja a lépéseket. Mentéskor a kliens összefűzi az adatokat és elküldi a `/recipe` POST végpontra. Siker esetén a lista frissül.
- **Recept szerkesztése**: A felhasználó a saját receptjének menüjéből az "Edit" opciót választja. Az űrlap betölti a recept aktuális adatait, amelyeket a felhasználó módosíthat. Mentéskor a rendszer frissíti a receptet.
- **Recept törlése**: A felhasználó a "Delete" opciót választja. Egy megerősítő ablak jóváhagyása után a rendszer törli a receptet a `/recipe/{id}` DELETE végponton keresztül.
- **Profil kezelése**: A Profil menüpont alatt a rendszer betölti az aktuális felhasználó adatait (`/user`) és listázza a saját feltöltött receptjeit ("My recipes"), ahol a fenti szerkesztési és törlési műveletek szintén elérhetők.

## 6. Funkció–követelmény megfeleltetés

| ID  | Verzió | Követelmény                                      | Funkció                                                                               |
|-----|--------|--------------------------------------------------|---------------------------------------------------------------------------------------|
| K01 | V1.0   | Felhasználói fiókok kezelése                    | Regisztráció (`/user/register`), bejelentkezés Spring Security-vel, aktuális user lekérdezése.          |
| K02 | V1.0   | Receptek adminisztrációja                       | Új receptek létrehozása, szerkesztése, törlése (`/recipe`), hozzávalók és kategóriák kezelése.          |
| K03 | V1.0   | Receptek szűrése és keresése                    | Kategória szerinti szűrés (`/recipe/bycategory`) és kliensoldali név szerinti keresés.                  |
| K04 | V1.0   | Online elérhető nyilvános recept katalógus      | A receptek a főoldalon bárki számára böngészhetők és megtekinthetők autentikáció nélkül.                |
| K05 | V1.0   | Tápérték adatok kezelése                        | Alapanyagok tápértékadatainak tárolása és listázása (`/material`) mértékegységgel.                      |
| K06 | V1.0   | Egyszerűen használható kezelőfelület            | Blazor és MudBlazor alapú reszponzív felület dialógusokkal és kártyás nézettel.                         |
| K07 | V1.0   | Platformfüggetlen, robosztus működés            | Java Spring Boot + Blazor stack, böngészőfüggetlen használat.                                           |
| K08 | V1.0   | Bővíthetőség                                     | Moduláris architektúra, OpenAPI dokumentáció, külön entitás- és service-rétegek.                        |