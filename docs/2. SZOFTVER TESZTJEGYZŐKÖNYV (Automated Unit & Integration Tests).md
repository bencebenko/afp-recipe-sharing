# ğŸ“„ SZOFTVER TESZTJEGYZÅKÃ–NYV (Automated Unit & Integration Tests)

**Dokumentum AzonosÃ­tÃ³:** `TR-2025-RECIPE-UNIT-INT-001`
**DÃ¡tum:** 2025. december 9.
**Teszt Keretrendszer:** JUnit 5, Mockito, Spring Boot Test

---

## 1. Menedzsment Ã–sszefoglalÃ³

Ez a dokumentum a **ReceptkezelÅ‘ AlkalmazÃ¡s** backend kÃ³djÃ¡nak automatizÃ¡lt tesztelÃ©si eredmÃ©nyeit tartalmazza. A tesztelÃ©s kÃ©t szinten zajlott:
1.  **Unit Tesztek (Service rÃ©teg):** Az Ã¼zleti logika izolÃ¡lt ellenÅ‘rzÃ©se (Mockery/JMock hasznÃ¡latÃ¡val).
2.  **IntegrÃ¡ciÃ³s Tesztek (Controller rÃ©teg):** A REST API vÃ©gpontok Ã©s a HTTP kommunikÃ¡ciÃ³ ellenÅ‘rzÃ©se (Spring MockMvc hasznÃ¡latÃ¡val).

| **Metrika** | **Ã‰rtÃ©k** |
| :--- | :--- |
| **Ã–sszes Teszteset** | **31 db** |
| **Sikeres (Passed)** | 31 db |
| **Sikertelen (Failed)** | 0 db |
| **Lefedett Komponensek** | Services (Recipe, Material, Category, UserDetails), Controllers (Recipe, Material, Category, User) |
| **Ã–sszesÃ­tett EredmÃ©ny** | âœ… **MEGFELELT** |

---

## 2. RÃ©szletes EredmÃ©nyek: Service RÃ©teg (Unit Tests)

A Service rÃ©teg tesztjei kÃ¼lsÅ‘ fÃ¼ggÅ‘sÃ©gek (adatbÃ¡zis) nÃ©lkÃ¼l, mock objektumokkal ellenÅ‘rzik az Ã¼zleti logikÃ¡t Ã©s a kivÃ©telkezelÃ©st.

### ğŸ”¹ RecipeServiceTest
| Teszt MetÃ³dus | LeÃ­rÃ¡s / EllenÅ‘rzÃ¶tt viselkedÃ©s | EredmÃ©ny |
| :--- | :--- | :--- |
| `testGetAll_ReturnsMappedDtos` | Ã–sszes recept lekÃ©rdezÃ©se Ã©s DTO-ra mapping ellenÅ‘rzÃ©se. | ğŸŸ¢ OK |
| `testGetById_ReturnsMappedDto_WhenFound` | Egyedi recept lekÃ©rÃ©se ID alapjÃ¡n (sikeres Ã¡g). | ğŸŸ¢ OK |
| `testGetById_ReturnsNull_WhenNotFound` | Nem lÃ©tezÅ‘ ID esetÃ©n `null` Ã©rtÃ©k visszaadÃ¡sa. | ğŸŸ¢ OK |
| `testGetByCategory_ReturnsMappedDtos` | SzÅ±rÃ©s kategÃ³ria alapjÃ¡n, lista visszaadÃ¡sa. | ğŸŸ¢ OK |
| `testSaveRecipe_SavesAndReturnsDto` | Ãšj recept mentÃ©se, fÃ¼ggÅ‘sÃ©gek (User, Category, Material) ellenÅ‘rzÃ©se. | ğŸŸ¢ OK |
| `testSaveRecipe_Throws...UserNotFound` | KivÃ©tel dobÃ¡sa, ha a megadott felhasznÃ¡lÃ³ nem lÃ©tezik. | ğŸŸ¢ OK |
| `testSaveRecipe_Throws...CategoryNotFound` | KivÃ©tel dobÃ¡sa, ha a kategÃ³ria Ã©rvÃ©nytelen. | ğŸŸ¢ OK |
| `testSaveRecipe_Throws...MaterialNotFound` | KivÃ©tel dobÃ¡sa, ha az alapanyag Ã©rvÃ©nytelen. | ğŸŸ¢ OK |
| `testDeleteRecipe_DelegatesToRepository` | TÃ¶rlÃ©si kÃ©rÃ©s tovÃ¡bbÃ­tÃ¡sa a repository felÃ©. | ğŸŸ¢ OK |

### ğŸ”¹ MaterialServiceTest & CategoryServiceTest
| Teszt MetÃ³dus | LeÃ­rÃ¡s / EllenÅ‘rzÃ¶tt viselkedÃ©s | EredmÃ©ny |
| :--- | :--- | :--- |
| `MaterialService.getAll...` | Alapanyagok listÃ¡zÃ¡sa Ã©s mezÅ‘k (kalÃ³ria, fehÃ©rje, stb.) helyessÃ©ge. | ğŸŸ¢ OK |
| `MaterialService.getAll...Empty` | Ãœres lista kezelÃ©se, ha nincs adat az adatbÃ¡zisban. | ğŸŸ¢ OK |
| `CategoryService.getAll...` | KategÃ³riÃ¡k listÃ¡zÃ¡sa Ã©s DTO konverziÃ³. | ğŸŸ¢ OK |
| `CategoryService.getAll...Empty` | Ãœres kategÃ³rialista kezelÃ©se. | ğŸŸ¢ OK |

### ğŸ”¹ MyUserDetailServiceTest (Security)
| Teszt MetÃ³dus | LeÃ­rÃ¡s / EllenÅ‘rzÃ¶tt viselkedÃ©s | EredmÃ©ny |
| :--- | :--- | :--- |
| `loadUserByUsername_Returns...` | Sikeres felhasznÃ¡lÃ³ betÃ¶ltÃ©s Ã©s `MyUserDetails` visszaadÃ¡sa. | ğŸŸ¢ OK |
| `loadUserByUsername_Throws...` | `UsernameNotFoundException` dobÃ¡sa ismeretlen felhasznÃ¡lÃ³nÃ¡l. | ğŸŸ¢ OK |

---

## 3. RÃ©szletes EredmÃ©nyek: Controller RÃ©teg (Web Slice Tests)

A Controller rÃ©teg tesztjei szimulÃ¡lt HTTP kÃ©rÃ©sekkel (MockMvc) ellenÅ‘rzik a vÃ©gpontok vÃ¡laszait Ã©s a JSON szerkezetet.

### ğŸ”¸ RecipeControllerTest
| VÃ©gpont | Teszt MetÃ³dus | HTTP Status | EredmÃ©ny |
| :--- | :--- | :--- | :--- |
| `GET /recipe` | `getAll_ShouldReturnListOfRecipes` | 200 OK | ğŸŸ¢ OK |
| `GET /recipe` | `getAll_ShouldReturnEmptyList...` | 200 OK | ğŸŸ¢ OK |
| `GET /recipe/{id}` | `getById_ShouldReturnRecipe` | 200 OK | ğŸŸ¢ OK |
| `POST /recipe` | `save_ShouldReturnSavedRecipe` | 200 OK | ğŸŸ¢ OK |
| `GET /recipe/bycategory` | `getByCategory_ShouldReturnFiltered...` | 200 OK | ğŸŸ¢ OK |
| `GET /recipe/bycategory` | `getByCategory_ShouldReturnBadRequest...` | 400 Bad Req | ğŸŸ¢ OK |
| `DELETE /recipe/{id}` | `delete_ShouldReturnOkStatus` | 200 OK | ğŸŸ¢ OK |

### ğŸ”¸ UserControllerTest (Auth & Registration)
| VÃ©gpont | Teszt MetÃ³dus | HTTP Status | EredmÃ©ny |
| :--- | :--- | :--- | :--- |
| `POST /user/register` | `register_ShouldReturnError_WhenUserExists` | 200 OK (Error msg) | ğŸŸ¢ OK |
| `POST /user/register` | `register_ShouldSaveAndReturnSuccess` | 200 OK (Success) | ğŸŸ¢ OK |
| `GET /user` | `getCurrentUser_ShouldReturnUnauthorized...` | 401 Unauth | ğŸŸ¢ OK |
| `GET /user` | `getCurrentUser_ShouldReturnNotFound...` | 404 Not Found | ğŸŸ¢ OK |
| `GET /user` | `getCurrentUser_ShouldReturnUserDto...` | 200 OK | ğŸŸ¢ OK |

### ğŸ”¸ Material & Category Controllers
| VÃ©gpont | Teszt MetÃ³dus | EllenÅ‘rzÃ©s | EredmÃ©ny |
| :--- | :--- | :--- | :--- |
| `GET /material` | `getAll_ShouldReturnListOfMaterials` | JSON Array length & content | ğŸŸ¢ OK |
| `GET /category` | `getAll_ShouldReturnListOfCategories` | JSON Array length & content | ğŸŸ¢ OK |

---

## 4. Teszt KÃ¶rnyezet Ã©s KonfigurÃ¡ciÃ³

A tesztek az alÃ¡bbi konfigurÃ¡ciÃ³val kerÃ¼ltek futtatÃ¡sra:

* **Platform:** Java 17 / Spring Boot 3.x
* **Teszt Framework:** JUnit 5 (Jupiter)
* **MockolÃ¡s:**
    * Service rÃ©tegben: `org.jmock.Mockery` (Legacy support)
    * Controller rÃ©tegben: `org.mockito.Mockito` & `@MockBean`
* **Web TesztelÃ©s:** `Spring MockMvc` (Server-side testing without full HTTP server)

## 5. ZÃ¡radÃ©k

Az automatizÃ¡lt tesztek lefedik a rendszer kritikus Ã¼zleti logikÃ¡jÃ¡t Ã©s a publikus API vÃ©gpontokat. Minden teszteset sikeresen lefutott (GREEN state), regressziÃ³s hiba nem talÃ¡lhatÃ³. A kÃ³d minÅ‘sÃ©ge tesztelÃ©si szempontbÃ³l megfelelÅ‘.

**JÃ³vÃ¡hagyta:**
NÃ©meth DÃ¡vid