@page "/Account"
@using Dialogs
@inject NavigationManager NavigationManager
@inject IUserService userService

<MudGrid>
    <MudItem>
        <MudText>You are not logged in.</MudText>
        <MudButton OnClick="@OnLogin">Login</MudButton>
    </MudItem>
</MudGrid>

@code{
    private bool IsUserLoggedIn = false;

    protected override async Task OnInitializedAsync()
    {
        IsUserLoggedIn = await userService.IsUserLoggedIn();
        if (!IsUserLoggedIn)
        {
            NavigationManager.NavigateTo("http://localhost:8080/login");
        }
    }

    private async Task OnLogin()
    {
        var options = new DialogOptions()
        {
            CloseOnEscapeKey = true,
            MaxWidth = MaxWidth.Medium,
            CloseButton = true
        };
        var res = await DialogService.ShowAsync<LoginDialog>("Login", options);
    }
}