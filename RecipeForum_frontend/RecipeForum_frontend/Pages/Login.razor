@page "/Account"
@using Dialogs

@inject IUserService userService

<MudGrid>
    <MudItem>
        @if (!IsUserLoggedIn)
        {
            <MudText>You are not logged in.</MudText>
            <MudButton OnClick="@OnLogin">Login</MudButton>
        }
        else
        {
            <MudText>Account details</MudText>
        }
    </MudItem>
</MudGrid>

@code{
    private bool IsUserLoggedIn = false;

    protected override async Task OnInitializedAsync()
    {
        IsUserLoggedIn = await userService.IsUserLoggedIn();
    }

    private async Task OnLogin()
    {
        var options = new DialogOptions()
        {
            CloseOnEscapeKey = true,
            MaxWidth = MaxWidth.Medium,
            CloseButton = true
        };
        var res = await DialogService.ShowAsync<LoginDialog>("Login", options);
    }
}