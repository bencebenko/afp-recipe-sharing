@using RecipeForum_frontend.Infrastructure
@inject NavigationManager Navigation
@inject CategoryFilterState CategoryFilterState
﻿
<MudAppBar Elevation="25" Fixed="true" class="appbar-blurred">
    <MudToolBar Gutters="true" Style="width: 100%;">
        <NavMenu OnToggleDrawer="ToggleDrawer" />
    </MudToolBar>
</MudAppBar>

<MudDrawer @bind-Open="_drawerOpen" Elevation="2" Anchor="Anchor.Right" ClipMode="DrawerClipMode.Always" Class="d-md-none">
    <MudNavMenu Class="nav-text flex-column pa-4">
        <MudNavLink OnClick="@(() => ResetAndNavigateToHome())" Icon="@Icons.Material.Filled.Home" Match="NavLinkMatch.All">Home</MudNavLink>
        <MudNavLink OnClick="CategoryFilterState.ToggleFilter" Icon="@Icons.Material.Filled.Interests">Categories</MudNavLink>
        <MudDivider Class="my-2" />
        <AccountNavMenu />
    </MudNavMenu>
</MudDrawer>

<MudMainContent Class="@(_drawerOpen ? "ml-drawer" : "")">
    <MudContainer MaxWidth="MaxWidth.False" Class="mt-4">
        @ChildContent
    </MudContainer>
</MudMainContent>

@code {
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    private bool _drawerOpen;

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }
    private void ResetAndNavigateToHome()
    {
        CategoryFilterState.ResetFilter();
        Navigation.NavigateTo("/");
    }

}